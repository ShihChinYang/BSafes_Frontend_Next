(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{36250:function(e,a,t){"use strict";t.d(a,{Z:function(){return F}});var n=t(85893),r=t(67294),i=t(9473),s=t(11163),o=t(38643),c=t(10682),l=t(59331),f=t(21608),_=t(31555),d=t(26699),u=t(55112),m=t.n(u),h=t(14994),x=t(13314),g=t(22079),p=t(27856);function B(){var e=(0,s.useRouter)(),a=(0,i.v9)((function(e){return e.container.workspaceName})),t=(0,i.v9)((function(e){return e.container.workspaceKey})),o=(0,i.v9)((function(e){return e.container.workspaceKeyReady})),l=(0,i.v9)((function(e){return e.page.aborted})),u=(0,i.v9)((function(e){return e.page.itemPath})),B=(0,r.useState)([]),v=B[0],b=B[1],S=v.map((function(a,t){return t!==v.length-1?(0,n.jsxs)(d.Z.Item,{onClick:function(){e.push(a.link)},active:!1,children:[a.icon&&(0,n.jsx)("i",{className:"".concat(a.icon," px-1")}),a.title]},t):(0,n.jsxs)(d.Z.Item,{active:!0,children:[a.icon&&(0,n.jsx)("i",{className:"".concat(a.icon," px-1")}),a.title]},t)}));return(0,r.useEffect)((function(){if(!l&&u&&o){(0,h.qu)(true,"itemPath && workspaceKeyReady");var e=u.map((function(e,n){var r,i,s,o,c,l,f,_,d=e._id.split(":")[0];switch(d){case"u":r=null,l=a,i="/safe";break;case"t1":r=null,l=a,i="/team/"+e._id;break;case"tm":r="fa fa-users",l="Members",i="/teamMembers/"+e._id;break;case"ac":r="fa fa-tasks",l="Activities",i="/activities/"+e._id;break;case"b":r="fa fa-archive",i="/box/contents/"+e._id;break;case"f":r="fa fa-folder-o",i="/folder/contents/"+e._id;break;case"n":r="fa fa-book",i="/notebook/contents/"+e._id;break;case"d":r="fa fa-calendar",i="/diary/contents/"+e._id;break;case"p":r="fa fa-file-text-o",i="/page/"+e._id;break;case"np":r="fa fa-file-text-o",i="/notebook/p/"+e._id;break;case"dp":r="fa fa-file-text-o",i="/diary/p/"+e._id;case"t":r="fa fa-trash",i="/trashBox/"+e._id}return"u"===d||"t1"===d||"t"===d||"tm"===d||"ac"===d||e._source.envelopeIV&&e._source.ivEnvelope&&e._source.ivEnvelopeIV||(f=g.util.decode64(e._source.keyEnvelope),_=(0,x.Ag)(f,t),e._source.title?(s=(0,x.Ag)(g.util.decode64(e._source.title),_),o=g.util.decodeUtf8(s),o=p.sanitize(o),(c=document.createElement("span")).innerHTML=o,l=c.textContent||c.innerText):l=""),{title:l,icon:r,link:i}}));b(e)}}),[l,u,o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.Z,{fluid:!0,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(_.Z,{xs:10,sm:11,className:"".concat(m().itemPath," rounded-end"),children:(0,n.jsxs)(d.Z,{className:"".concat(m().itemPathBreadcrumb),children:[(0,n.jsxs)(d.Z.Item,{onClick:function(){return e.push("/teams")},active:!1,className:"".concat(m().teamsPathItem),linkProps:{className:m().teamsPathLink},children:[(0,n.jsx)("i",{className:"fa fa-building","aria-hidden":"true"})," Teams "]}),S]})}),(0,n.jsx)(_.Z,{xs:2,sm:1})]})})})}var v=t(47568),b=t(29815),S=t(34051),j=t.n(S),P=t(18384),k=t(35005),Z=t(16518),C=t(32171),N=t(12529),y=t(62318),I=t(8914);function w(e){var a=(0,s.useRouter)(),t=(0,i.I0)(),o=(0,r.useState)(!1),c=o[0],l=o[1],u=(0,r.useState)(!1),x=u[0],g=u[1],p=(0,r.useState)(""),B=p[0],S=p[1],w=(0,r.useState)(null),T=w[0],F=w[1],L=(0,i.v9)((function(e){return e.container.selectedItems})),D=(0,i.v9)((function(e){return e.container.workspace})),z=(0,i.v9)((function(e){return e.container.container})),E=(0,i.v9)((function(e){return e.container.items})),J=(0,i.v9)((function(e){return e.container.containerList})),A=(0,i.v9)((function(e){return e.page.itemPath})),R=!a.asPath.includes("/trashBox/")&&L&&L.length>0,M=(0,r.useRef)(null),O=function(){t((0,I.x_)())},q=function(e){var a=T.findIndex((function(a){return a.id===e.id}));console.log(a),F(a>=0?T.slice(0,a+1):(0,b.Z)(T).concat([{title:e.title,id:e.id}])),t((0,I.rb)({container:e.id}))},W=function(){var e=(0,v.Z)(j().mark((function e(){var a,n,r,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=function(e){var a=E.find((function(a){return a.id===L[e]}));a={id:a.id,container:a.container,position:a.position},n.push(a)},n=[],r=0;r<L.length;r++)a(r);return 0,i={space:D,items:JSON.stringify(n),targetItem:T[T.length-1].id,sourceContainersPath:JSON.stringify(A.map((function(e){return e._id}))),targetContainersPath:JSON.stringify(T.map((function(e){return e.id}))),totalUsage:JSON.stringify(0)},e.prev=5,e.next=8,(0,I.of)({action:"dropItemsInside",payload:i});case 8:l(!1),O(),t((0,I.bZ)({pageNumber:1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),(0,h.qu)(true,"Moving items failed.");case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,v.Z)(j().mark((function e(){var a,n,r,i,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=function(e){var a=E.find((function(a){return a.id===L[e]}));a={id:a.id,container:a.container,position:a.position},r.push(a)},n=z,r=[],i=0;i<L.length;i++)a(i);return"root"===n&&(n=D),0,s={items:JSON.stringify(r),targetSpace:D,originalContainer:n,sourceContainersPath:JSON.stringify(A.map((function(e){return e._id}))),totalUsage:JSON.stringify(0)},e.prev=7,e.next=10,(0,I.kM)({payload:s});case 10:g(!1),S(""),O(),t((0,I.bZ)({pageNumber:1})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),(0,h.qu)(true,"Trashing items failed.");case 19:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),V=function(){S(""),g(!1)};return(0,r.useEffect)((function(){F([{title:"Top",id:D}])}),[D]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.Z,{in:R,children:(0,n.jsx)(f.Z,{className:m().itemsToolbar,children:(0,n.jsx)(_.Z,{xs:12,sm:{span:8,offset:2},children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(_.Z,{xs:{span:3,offset:3},sm:{span:2,offset:6},children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(k.Z,{size:"xs",variant:"light",className:"m-0 py-0 ".concat(m().toolbarButton),id:"moveItemsBtn",onClick:function(){l(!0),t((0,I.rb)({container:D}))},children:[(0,n.jsx)("i",{className:"fa fa-2x fa-hand-o-right text-white","aria-hidden":"true"}),(0,n.jsx)("h6",{className:"text-center m-0 text-white text-capitalize",children:"Move"})]})})}),(0,n.jsx)(_.Z,{xs:3,sm:2,children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(k.Z,{size:"xs",variant:"light",className:"m-0 py-0 ".concat(m().toolbarButton),id:"trashItemsBtn",onClick:function(){g(!0)},children:[(0,n.jsx)("i",{className:"fa fa-2x fa-trash text-white","aria-hidden":"true"}),(0,n.jsx)("h6",{className:"text-center m-0 text-white text-capitalize",children:"Trash"})]})})}),(0,n.jsx)(_.Z,{xs:3,sm:2,children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(k.Z,{size:"xs",variant:"light",className:"m-0 py-0 ".concat(m().toolbarButton),id:"deselectItems",onClick:O,children:[(0,n.jsx)("i",{className:"fa fa-2x fa-remove text-white","aria-hidden":"true"}),(0,n.jsx)("h6",{className:"text-center m-0 text-white text-capitalize",children:"Cancel"})]})})})]})})})}),(0,n.jsxs)(C.Z,{show:c,onHide:function(){l(!1)},children:[(0,n.jsx)(C.Z.Header,{closeButton:!0,children:(0,n.jsx)(C.Z.Title,{children:"Move items to"})}),(0,n.jsxs)(C.Z.Body,{children:[(0,n.jsx)(d.Z,{children:T&&T.map((function(e,a){return(0,n.jsx)(d.Z.Item,{onClick:function(){return q(e)},children:e.title},e.title+a)}))}),(0,n.jsx)(P.Z,{children:J.flatMap((function(e){var a="";return L.find((function(a){return a===e.id}))?[]:(e.id.startsWith("f")?a="fa fa-folder":e.id.startsWith("b")&&(a="fa fa-archive"),(0,n.jsxs)(P.Z.Item,{action:!0,onClick:function(){return q(e)},className:"pt-3 pb-3",children:[(0,n.jsx)("i",{className:a+" me-2 fs-5 fw-light","aria-hidden":"true"}),(0,n.jsx)("em",{className:"fs-5 fw-light",children:e.title})]},e.id))}))})]}),(0,n.jsx)(C.Z.Footer,{children:(0,n.jsx)(k.Z,{variant:"primary",size:"sm",onClick:W,children:"Drop"})})]}),(0,n.jsx)(C.Z,{show:x,onEntered:function(){M.current.focus()},onHide:V,children:(0,n.jsxs)(C.Z.Body,{children:[(0,n.jsx)("h3",{children:"Are you Sure?"}),(0,n.jsx)(N.Z,{children:(0,n.jsx)(y.Z,{className:"mb-3",children:(0,n.jsx)(N.Z.Control,{ref:M,size:"lg",type:"text",value:B,onChange:function(e){return S(e.target.value)},placeholder:"Yes"})})}),(0,n.jsx)(k.Z,{variant:"primary",className:"pull-right",size:"md",onClick:U,disabled:"Yes"!==B,children:"Trash"}),(0,n.jsx)(k.Z,{variant:"light",className:"pull-right",size:"md",onClick:V,children:"Cancel"})]})})]})}var T=t(42670),F=function(e){var a=e.children,t=!1;(0,h.qu)(t,"Rendering ContentPageLayout");var f=(0,s.useRouter)(),_=(0,i.I0)(),d=(0,i.v9)((function(e){return e.auth.isLoggedIn}));return(0,r.useEffect)((function(){(0,h.qu)(t,"Calling preflight, isLoggedIn",d),_((0,T.Br)())}),[]),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{bg:"light",expand:"lg",className:m().bsafesNavbar,children:(0,n.jsxs)(c.Z,{fluid:!0,children:[(0,n.jsx)(o.Z.Brand,{href:"/",children:(0,n.jsx)("span",{className:m().navbarTeamName,children:"BSafes"})}),(0,n.jsxs)(l.Z,{align:"end",className:"justify-content-end",children:[(0,n.jsx)(l.Z.Toggle,{variant:"link",id:"dropdown-basic",children:(0,n.jsx)("span",{className:m().memberBadge,children:"S"})}),(0,n.jsx)(l.Z.Menu,{children:d?(0,n.jsx)(l.Z.Item,{onClick:function(e){(0,h.qu)(t,"Log out"),f.push("/logOut")},children:"Log out"}):(0,n.jsx)(l.Z.Item,{onClick:function(e){(0,h.qu)(t,"Log in"),f.push("/logIn")},children:"Log In"})})]})]})}),(0,n.jsx)(B,{}),a,(0,n.jsx)(w,{})]})}},55112:function(e){e.exports={container:"BSafes_container__SJnrF",displayNone:"BSafes_displayNone__IJYA8",orangeText:"BSafes_orangeText__wzFlJ",greenText:"BSafes_greenText__bsFs6",mt3px:"BSafes_mt3px__FaCp5",externalLink:"BSafes_externalLink__pnv3h",spaceBackground:"BSafes_spaceBackground__3STY1",screenCenter:"BSafes_screenCenter__C0xuJ",navbarTeamName:"BSafes_navbarTeamName__5hoXD",bsafesNavbar:"BSafes_bsafesNavbar__6rLS_",memberBadge:"BSafes_memberBadge__VBRaz",btnCircle:"BSafes_btnCircle__x8rgC",btnFloating:"BSafes_btnFloating__5Vd74",btnFloatingAdd:"BSafes_btnFloatingAdd__ygig9",btnFloatingWrite:"BSafes_btnFloatingWrite__WjZkx",btnFloatingSave:"BSafes_btnFloatingSave__7_8J0",btnFloatingCancel:"BSafes_btnFloatingCancel__XqiMt",itemsToolbar:"BSafes_itemsToolbar__Gof0v",toolbarButton:"BSafes_toolbarButton__0JWlE",safeItemTypeIcon:"BSafes_safeItemTypeIcon__BZ_DQ",safeItem:"BSafes_safeItem__Tbekq",itemPath:"BSafes_itemPath__RV9WW",itemPathBreadcrumb:"BSafes_itemPathBreadcrumb__76Q8T",teamsPathItem:"BSafes_teamsPathItem__VgB0K",teamsPathLink:"BSafes_teamsPathLink__0Tc7M",containerTitleLabel:"BSafes_containerTitleLabel__Poxc9",containerControlPanel:"BSafes_containerControlPanel__LanmX",pageNavigationPart:"BSafes_pageNavigationPart__ZCjzz",pageNumberInput:"BSafes_pageNumberInput__FMtOt",pagePanel:"BSafes_pagePanel__UfT6e",containerCoverPanel:"BSafes_containerCoverPanel__9ASoE",containerContentsPanel:"BSafes_containerContentsPanel__wbbUh",folderPanel:"BSafes_folderPanel__DJwzr",notebookPanel:"BSafes_notebookPanel__EtLm_",diaryPanel:"BSafes_diaryPanel__mSdKO",boxPanel:"BSafes_boxPanel__A1nTa",containerOpenBtn:"BSafes_containerOpenBtn__l_vUE",contentsItemRow:"BSafes_contentsItemRow__89wCO",turningPageRow:"BSafes_turningPageRow__i4E15",pageBtn:"BSafes_pageBtn__QiyGP",pageBtnFixed:"BSafes_pageBtnFixed__nrP7J",previousPageBtn:"BSafes_previousPageBtn__edFco",nextPageBtn:"BSafes_nextPageBtn__AoWlt",searchBar:"BSafes_searchBar__Kif7Q",searchBarInput:"BSafes_searchBarInput__pNHSG",boxCoverPanel:"BSafes_boxCoverPanel__iIQJq",boxItemCard:"BSafes_boxItemCard__C83cg",boxItemCardBody:"BSafes_boxItemCardBody__9PLzU",folderCoverPanel:"BSafes_folderCoverPanel__5ZAAB",folderTab:"BSafes_folderTab__cCjHm",notebookCoverPanel:"BSafes_notebookCoverPanel__L8EGZ",diaryControlPanelBody:"BSafes_diaryControlPanelBody__q5OZC",diaryCoverPanel:"BSafes_diaryCoverPanel__SuIrw",diaryWeekendItem:"BSafes_diaryWeekendItem__kr0z_",diaryTodayItem:"BSafes_diaryTodayItem__U1_S7",pageBackground:"BSafes_pageBackground__ReVUC",leftPagePanel:"BSafes_leftPagePanel__Es0Jn",rightPagePanel:"BSafes_rightPagePanel__Pv9_5",imagesDragDropZone:"BSafes_imagesDragDropZone__42uwi",imagesDragDropZoneActive:"BSafes_imagesDragDropZoneActive__NQVtk",attachmentsDragDropZone:"BSafes_attachmentsDragDropZone__CmdET",attachmentsDragDropZoneActive:"BSafes_attachmentsDragDropZoneActive__Gdl0b",attachmentMoreBtn:"BSafes_attachmentMoreBtn__6vpkV",editorRow:"BSafes_editorRow__2Fr2c"}}}]);