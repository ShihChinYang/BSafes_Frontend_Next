"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{31940:function(e,t,a){var n=a(85893),i=a(67294),s=a(11163),r=a(9473),c=a(10682),l=a(42298),o=a(55112),u=a.n(o),f=a(8914),d=a(12578),h=a(14994);t.Z=function(e){var t=e.itemId,a=e.children,o=!0,m=(0,r.I0)(),v=(0,s.useRouter)(),x=(0,i.useState)(!1),p=x[0],g=x[1],j=(0,i.useState)(!1),k=j[0],N=j[1],Z=(0,r.v9)((function(e){return e.auth.isLoggedIn})),w=(0,r.v9)((function(e){return e.auth.searchKey})),C=(0,r.v9)((function(e){return e.auth.searchIV})),I=(0,r.v9)((function(e){return e.auth.expandedKey})),y=(0,r.v9)((function(e){return e.container.navigationInSameContainer})),P=(0,r.v9)((function(e){return e.container.container})),b=(0,r.v9)((function(e){return e.container.workspace})),E=(0,r.v9)((function(e){return e.container.workspaceKey})),q=(0,r.v9)((function(e){return e.container.workspaceKeyReady})),z=(0,r.v9)((function(e){return e.container.startDateValue})),W=(0,i.useState)(new Date(z)),D=W[0],B=(W[1],(0,r.v9)((function(e){return e.container.diaryContentsPageFirstLoaded})),(0,r.v9)((function(e){return e.page.id}))),S=(0,r.v9)((function(e){return e.page.pageNumber})),K=(0,r.v9)((function(e){return e.page.navigationMode})),F=(0,r.v9)((function(e){return e.page.space})),R=(0,r.v9)((function(e){return e.page.container})),A=(0,r.v9)((function(e){return e.page.itemCopy}));return(0,i.useEffect)((function(){var e=function(e,t){var a=t.shallow;console.log("App is changing to ".concat(e," ").concat(a?"with":"without"," shallow routing")),m((0,d.JG)())};return v.events.on("routeChangeStart",e),function(){v.events.off("routeChangeStart",e)}}),[]),(0,i.useEffect)((function(){if(Z&&t){(0,h.qu)(o,"page wrapper useEffect itemId: ",t),m((0,d.rs)()),m((0,d.cD)(!1)),g(!0),m((0,f.vB)(!1)),(0,h.qu)(o,"set pageItemId: ",v.query.itemId),m((0,d.sF)(v.query.itemId));var e=v.asPath;if("contents"===(e=e.split("/")[2]))m((0,f.H5)()),"d"===t.split(":")[0]&&(m((0,f.Pm)((new Date).getTime())),m((0,f.p8)(!1)))}}),[Z,t]),(0,i.useEffect)((function(){B&&p&&((0,h.qu)(o,"Dispatch getPageItemThunk ..."),m((0,d.Ed)({itemId:B,navigationInSameContainer:y})))}),[B,p]),(0,i.useEffect)((function(){p&&K&&((0,h.qu)(o,"setContainerData ..."),m(setContainerData({itemId:B,container:{space:b,id:P}})))}),[K]),(0,i.useEffect)((function(){S&&((0,h.qu)(o,"pageNumber: ",S),m(S%2?(0,d.ml)(u().leftPagePanel):(0,d.ml)(u().rightPagePanel)))}),[S]),(0,i.useEffect)((function(){if(F&&p){var e=v.asPath;if("contents"!==(e=e.split("/")[2])&&R===P)return void m((0,f.vB)(!0));if("contents"===e&&F===b)return B!==P&&m((0,f.ef)({container:B})),void m((0,f.vB)(!0));m((0,f.k_)()),N(!0)}}),[F]),(0,i.useEffect)((function(){if(k){var e=v.asPath;e=e.split("/")[2],"u"===F.substring(0,1)?((0,h.qu)(o,"Dispatch initWorkspace ..."),m("contents"!==e?(0,f.XZ)({container:R,workspaceId:F,workspaceKey:I,searchKey:w,searchIV:C}):(0,f.XZ)({container:B,workspaceId:F,workspaceKey:I,searchKey:w,searchIV:C})),m((0,f.vB)(!0))):m("contents"!==e?(0,f.VM)({teamId:F,container:R}):(0,f.VM)({teamId:F,container:B}))}}),[k]),(0,i.useEffect)((function(){(0,h.qu)(o,"useEffect [workspaceKey] ...");var e=v.asPath;if("contents"!==(e=e.split("/")[2])&&q&&E&&A&&p){var t=B.split(":")[0];(0,h.qu)(o,"Dispatch decryptPageItemThunk ..."),m((0,d.t_)({itemId:B,workspaceKey:E})),"f"!==t&&"b"!==t&&"n"!==t&&"d"!==t&&m((0,d.s6)({itemId:B})),g(!1),N(!1)}}),[q,A]),(0,i.useEffect)((function(){if((0,h.qu)(o,"useEffect [workspaceKey] ..."),P&&q&&p){var e=B.split(":")[0],t=v.asPath;"contents"===(t=t.split("/")[2])&&(g(!1),N(!1),(0,h.qu)(o,"listItemsThunk ..."),"d"!==e?m((0,f.bZ)({pageNumber:1})):(m((0,f.bZ)({startDate:(0,l.default)(D,"yyyyLL")})),m((0,f.p8)(!1))))}}),[q,P]),(0,n.jsx)(c.Z,{fluid:!0,children:a})}},22184:function(e,t,a){a.d(t,{Z:function(){return j}});var n=a(85893),i=a(67294),s=a(11163),r=a(9473),c=a(21608),l=a(31555),o=a(62318),u=a(35005),f=a(2086),d=a(67525),h=a(12529),m=a(59331),v=a(36968),x=a(55112),p=a.n(x),g=a(14994);function j(e){var t=e.pageNumber,a=void 0===t?null:t,x=e.onCoverClicked,j=void 0===x?null:x,k=e.onContentsClicked,N=e.onPageNumberChanged,Z=void 0===N?null:N,w=e.onGotoFirstItem,C=void 0===w?null:w,I=e.onGotoLastItem,y=void 0===I?null:I,P=e.onAdd,b=void 0===P?null:P,E=e.onSubmitSearch,q=void 0===E?null:E,z=e.onCancelSearch,W=void 0===z?null:z,D=function(e,t){var a=e.children,i=e.onClick;return(0,n.jsxs)("a",{href:"",ref:t,onClick:function(e){e.preventDefault(),i(e)},children:[(0,n.jsx)("i",{className:"fa fa-plus fa-lg text-white","aria-hidden":"true"}),a]})};(0,g.qu)(true,"Rendering TopControlPanel:",a);var B=(0,i.useRef)(null),S=(0,i.useRef)(null),K=(0,s.useRouter)(),F=(0,i.useState)(!1),R=F[0],A=F[1],L=(0,i.useState)(""),V=L[0],T=L[1],_=(0,r.v9)((function(e){return e.page.activity})),G=(0,r.v9)((function(e){return e.page.id})),M=(0,r.v9)((function(e){return e.page.position})),$=(0,r.v9)((function(e){return e.container.activity})),X=(0,r.v9)((function(e){return e.container.container})),H=((0,r.v9)((function(e){return e.container.mode})),(0,i.forwardRef)(D)),J=function(e){b("Page",e,G,M)},O=function(e){A(!0)},Q=function(e){e.preventDefault(),q(V)};return(0,i.useEffect)((function(){B.current&&(B.current.value=a)}),[a]),(0,i.useEffect)((function(){R&&S.current.focus()}),[R]),(0,n.jsxs)(n.Fragment,{children:[("Done"!==_&&"Error"!==_||"Done"!==$&&"Error"!==$)&&(0,n.jsx)(v.Z,{className:p().screenCenter,animation:"border"}),(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,n.jsx)(d.Z,{className:"".concat(p().containerControlPanel),children:(0,n.jsx)(d.Z.Body,{className:"",children:(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)(l.Z,{xs:4,children:[!X&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",children:(0,n.jsx)("i",{className:"fa fa-square fa-lg","aria-hidden":"true"})}),X&&(X.startsWith("u")||X.startsWith("t"))&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:j,children:(0,n.jsx)("i",{className:"fa fa-square fa-lg","aria-hidden":"true"})}),(a||X&&X.startsWith("n"))&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:j,children:(0,n.jsx)("i",{className:"fa fa-book fa-lg","aria-hidden":"true"})}),X&&X.startsWith("f")&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:j,children:(0,n.jsx)("i",{className:"fa fa-folder-o fa-lg","aria-hidden":"true"})}),X&&X.startsWith("b")&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:j,children:(0,n.jsx)("i",{className:"fa fa-archive fa-lg","aria-hidden":"true"})}),(a||X&&(X.startsWith("n")&&!K.asPath.includes("/contents/")||X.startsWith("f")&&!K.asPath.includes("/contents/")||X.startsWith("b")&&!K.asPath.includes("/contents/")))&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:k,children:(0,n.jsx)("i",{className:"fa fa-list-ul fa-lg","aria-hidden":"true"})})]}),(0,n.jsxs)(l.Z,{xs:8,children:[(a||X&&X.startsWith("n"))&&(0,n.jsxs)(h.Z.Group,{className:"pull-right",children:[(0,n.jsx)(h.Z.Control,{ref:B,type:"text",defaultValue:a||"",className:"".concat(p().pageNavigationPart," ").concat(p().pageNumberInput," pt-0 pb-0")}),(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoPageBtn",onClick:function(e){Z&&Z(B.current.value)},children:(0,n.jsx)("i",{className:"fa fa-arrow-right fa-lg","aria-hidden":"true"})}),(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoFirstItemBtn",onClick:C,children:(0,n.jsx)("i",{className:"fa fa-step-backward fa-lg","aria-hidden":"true"})}),(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoLastItemBtn",onClick:y,children:(0,n.jsx)("i",{className:"fa fa-step-forward fa-lg","aria-hidden":"true"})}),K.asPath.includes("/contents/")&&!R&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:O,children:(0,n.jsx)("i",{className:"fa fa-search fa-lg","aria-hidden":"true"})})]}),X&&(X.startsWith("f")||X.startsWith("b"))&&(0,n.jsxs)(f.Z,{className:"pull-right",children:[X.startsWith("f")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoFirstItemBtn",onClick:C,children:(0,n.jsx)("i",{className:"fa fa-step-backward fa-lg","aria-hidden":"true"})}),(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",id:"gotoLastItemBtn",onClick:y,children:(0,n.jsx)("i",{className:"fa fa-step-forward fa-lg","aria-hidden":"true"})})]}),G&&G.startsWith("p")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.Z,{align:"end",className:"justify-content-end ".concat(p().mt3px),children:[(0,n.jsx)(m.Z.Toggle,{as:H,variant:"link"}),(0,n.jsxs)(m.Z.Menu,{children:[(0,n.jsx)(m.Z.Item,{onClick:function(){return J("addAnItemBefore")},children:"Add before"}),(0,n.jsx)(m.Z.Item,{onClick:function(){return J("addAnItemAfter")},children:"Add after"})]})]}),(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",children:(0,n.jsx)("i",{className:"fa fa-ellipsis-v fa-lg","aria-hidden":"true"})})]}),K.asPath.includes("/contents/")&&!R&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white",onClick:O,children:(0,n.jsx)("i",{className:"fa fa-search fa-lg","aria-hidden":"true"})})})]}),X&&(X.startsWith("t")||X.startsWith("u"))&&(0,n.jsx)(u.Z,{variant:"link",size:"sm",className:"text-white pull-right",children:(0,n.jsx)("i",{className:"fa fa-ellipsis-v fa-lg","aria-hidden":"true"})})]})]})})})})}),R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,n.jsx)(d.Z,{className:"".concat(p().containerControlPanel),children:(0,n.jsx)(h.Z,{onSubmit:Q,className:p().searchBar,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(h.Z.Control,{ref:S,type:"text",className:"".concat(p().searchBarInput," text-white display-1"),value:V,onChange:function(e){(0,g.qu)(true,"search value:",e.target.value),T(e.target.value)}}),(0,n.jsx)(u.Z,{variant:"link",children:(0,n.jsx)("i",{id:"1",className:"fa fa-search fa-lg text-white","aria-hidden":"true",onClick:Q})}),(0,n.jsx)(u.Z,{variant:"link",children:(0,n.jsx)("i",{id:"1",className:"fa fa-times fa-lg text-white","aria-hidden":"true",onClick:function(e){e.preventDefault(),T(""),A(!1),W()}})})]})})})})})]})]})}},2086:function(e,t,a){var n=a(94184),i=a.n(n),s=a(67294),r=a(76792),c=a(85893);const l=s.forwardRef((({bsPrefix:e,size:t,vertical:a,className:n,as:s="div",...l},o)=>{const u=(0,r.vE)(e,"btn-group");let f=u;return a&&(f=`${u}-vertical`),(0,c.jsx)(s,{...l,ref:o,className:i()(n,f,t&&`${u}-${t}`)})}));l.displayName="ButtonGroup",l.defaultProps={vertical:!1,role:"group"},t.Z=l}}]);