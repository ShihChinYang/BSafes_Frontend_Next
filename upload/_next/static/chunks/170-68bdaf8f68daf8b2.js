"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{55068:function(e,n,t){t.d(n,{Z:function(){return k}});var a=t(26042),r=t(85893),i=t(67294),s=t(9473),c=t(11163),o=t(21608),u=t(31555),l=t(35005),f=t(67525),d=t(62318),h=t(12529),v=t(36968),p=t(9198),m=t.n(p),g=t(55112),x=t.n(g);function k(e){var n=e.datePickerViewMode,t=void 0===n?"dayMonth":n,p=e.startDate,g=e.setStartDate,k=e.showListIcon,j=void 0!==k&&k,w=(e.showSearchIcon,e.handleSearch,e.onCoverClicked),C=e.onContentsClicked,Z=e.onSubmitSearch,y=void 0===Z?null:Z,I=e.onCancelSearch,N=void 0===I?null:I,P=(0,c.useRouter)(),E=(0,i.useRef)(null),D=(0,i.useState)(!1),S=D[0],b=D[1],q=(0,i.useState)(""),B=q[0],K=q[1],F=(0,s.v9)((function(e){return e.page.activity})),M=(0,s.v9)((function(e){return e.container.activity})),V=(0,i.forwardRef)((function(e,n){e.value;var t=e.onClick;return(0,r.jsx)(l.Z,{variant:"link",size:"sm",className:"text-white pull-right",onClick:t,ref:n,children:(0,r.jsx)("i",{className:"fa fa-calendar fa-lg","aria-hidden":"true"})})})),_="monthYear"===t?{showMonthYearPicker:!0,showFullMonthYearPicker:!0}:{},L=function(e){e.preventDefault(),y(B)};return(0,i.useEffect)((function(){S&&E.current.focus()}),[S]),(0,r.jsxs)(r.Fragment,{children:[("Done"!==F&&"Error"!==F||"Done"!==M&&"Error"!==M)&&(0,r.jsx)(v.Z,{className:x().screenCenter,animation:"border"}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(u.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,r.jsx)(f.Z,{className:"".concat(x().containerControlPanel),children:(0,r.jsx)(f.Z.Body,{className:x().diaryControlPanelBody,children:(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(u.Z,{xs:4,children:[(0,r.jsx)(l.Z,{variant:"link",size:"sm",className:"text-white",onClick:w,children:(0,r.jsx)("i",{className:"fa fa-book fa-lg","aria-hidden":"true"})}),j&&(0,r.jsx)(l.Z,{variant:"link",size:"sm",className:"text-white",onClick:C,children:(0,r.jsx)("i",{className:"fa fa-list-ul fa-lg","aria-hidden":"true"})})]}),(0,r.jsx)(u.Z,{xs:4}),(0,r.jsxs)(u.Z,{xs:4,children:[P.asPath.includes("/contents/")&&!S&&(0,r.jsx)(l.Z,{variant:"link",size:"sm",className:"text-white pull-right",onClick:function(e){b(!0)},children:(0,r.jsx)("i",{className:"fa fa-search fa-lg","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"pull-right",children:(0,r.jsx)(m(),(0,a.Z)({selected:p,onChange:function(e){return g(e)},customInput:(0,r.jsx)(V,{}),showPopperArrow:!1},_))})]})]})})})})}),S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(o.Z,{children:(0,r.jsx)(u.Z,{xs:12,sm:{span:10,offset:1},lg:{span:8,offset:2},children:(0,r.jsx)(f.Z,{className:"".concat(x().containerControlPanel),children:(0,r.jsx)(h.Z,{onSubmit:L,className:x().searchBar,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z.Control,{ref:E,type:"text",className:"".concat(x().searchBarInput," text-white display-1"),value:B,onChange:function(e){K(e.target.value)}}),(0,r.jsx)(l.Z,{variant:"link",children:(0,r.jsx)("i",{id:"1",className:"fa fa-search fa-lg text-white","aria-hidden":"true",onClick:L})}),(0,r.jsx)(l.Z,{variant:"link",children:(0,r.jsx)("i",{id:"1",className:"fa fa-times fa-lg text-white","aria-hidden":"true",onClick:function(e){e.preventDefault(),K(""),b(!1),N()}})})]})})})})})]})]})}},31940:function(e,n,t){var a=t(85893),r=t(67294),i=t(11163),s=t(9473),c=t(10682),o=t(42298),u=t(55112),l=t.n(u),f=t(8914),d=t(12578),h=t(14994);n.Z=function(e){var n=e.itemId,t=e.children,u=!0,v=(0,s.I0)(),p=(0,i.useRouter)(),m=(0,r.useState)(!1),g=m[0],x=m[1],k=(0,r.useState)(!1),j=k[0],w=k[1],C=(0,s.v9)((function(e){return e.auth.isLoggedIn})),Z=(0,s.v9)((function(e){return e.auth.searchKey})),y=(0,s.v9)((function(e){return e.auth.searchIV})),I=(0,s.v9)((function(e){return e.auth.expandedKey})),N=(0,s.v9)((function(e){return e.container.navigationInSameContainer})),P=(0,s.v9)((function(e){return e.container.container})),E=(0,s.v9)((function(e){return e.container.workspace})),D=(0,s.v9)((function(e){return e.container.workspaceKey})),S=(0,s.v9)((function(e){return e.container.workspaceKeyReady})),b=(0,s.v9)((function(e){return e.container.startDateValue})),q=(0,r.useState)(new Date(b)),B=q[0],K=(q[1],(0,s.v9)((function(e){return e.container.diaryContentsPageFirstLoaded})),(0,s.v9)((function(e){return e.page.id}))),F=(0,s.v9)((function(e){return e.page.pageNumber})),M=(0,s.v9)((function(e){return e.page.navigationMode})),V=(0,s.v9)((function(e){return e.page.space})),_=(0,s.v9)((function(e){return e.page.container})),L=(0,s.v9)((function(e){return e.page.itemCopy}));return(0,r.useEffect)((function(){var e=function(e,n){var t=n.shallow;console.log("App is changing to ".concat(e," ").concat(t?"with":"without"," shallow routing")),v((0,d.JG)())};return p.events.on("routeChangeStart",e),function(){p.events.off("routeChangeStart",e)}}),[]),(0,r.useEffect)((function(){if(C&&n){(0,h.qu)(u,"page wrapper useEffect itemId: ",n),v((0,d.rs)()),v((0,d.cD)(!1)),x(!0),v((0,f.vB)(!1)),(0,h.qu)(u,"set pageItemId: ",p.query.itemId),v((0,d.sF)(p.query.itemId));var e=p.asPath;if("contents"===(e=e.split("/")[2]))v((0,f.H5)()),"d"===n.split(":")[0]&&(v((0,f.Pm)((new Date).getTime())),v((0,f.p8)(!1)))}}),[C,n]),(0,r.useEffect)((function(){K&&g&&((0,h.qu)(u,"Dispatch getPageItemThunk ..."),v((0,d.Ed)({itemId:K,navigationInSameContainer:N})))}),[K,g]),(0,r.useEffect)((function(){g&&M&&((0,h.qu)(u,"setContainerData ..."),v(setContainerData({itemId:K,container:{space:E,id:P}})))}),[M]),(0,r.useEffect)((function(){F&&((0,h.qu)(u,"pageNumber: ",F),v(F%2?(0,d.ml)(l().leftPagePanel):(0,d.ml)(l().rightPagePanel)))}),[F]),(0,r.useEffect)((function(){if(V&&g){var e=p.asPath;if("contents"!==(e=e.split("/")[2])&&_===P)return void v((0,f.vB)(!0));if("contents"===e&&V===E)return K!==P&&v((0,f.ef)({container:K})),void v((0,f.vB)(!0));v((0,f.k_)()),w(!0)}}),[V]),(0,r.useEffect)((function(){if(j){var e=p.asPath;e=e.split("/")[2],"u"===V.substring(0,1)?((0,h.qu)(u,"Dispatch initWorkspace ..."),v("contents"!==e?(0,f.XZ)({container:_,workspaceId:V,workspaceKey:I,searchKey:Z,searchIV:y}):(0,f.XZ)({container:K,workspaceId:V,workspaceKey:I,searchKey:Z,searchIV:y})),v((0,f.vB)(!0))):v("contents"!==e?(0,f.VM)({teamId:V,container:_}):(0,f.VM)({teamId:V,container:K}))}}),[j]),(0,r.useEffect)((function(){(0,h.qu)(u,"useEffect [workspaceKey] ...");var e=p.asPath;if("contents"!==(e=e.split("/")[2])&&S&&D&&L&&g){var n=K.split(":")[0];(0,h.qu)(u,"Dispatch decryptPageItemThunk ..."),v((0,d.t_)({itemId:K,workspaceKey:D})),"f"!==n&&"b"!==n&&"n"!==n&&"d"!==n&&v((0,d.s6)({itemId:K})),x(!1),w(!1)}}),[S,L]),(0,r.useEffect)((function(){if((0,h.qu)(u,"useEffect [workspaceKey] ..."),P&&S&&g){var e=K.split(":")[0],n=p.asPath;"contents"===(n=n.split("/")[2])&&(x(!1),w(!1),(0,h.qu)(u,"listItemsThunk ..."),"d"!==e?v((0,f.bZ)({pageNumber:1})):(v((0,f.bZ)({startDate:(0,o.default)(B,"yyyyLL")})),v((0,f.p8)(!1))))}}),[S,P]),(0,a.jsx)(c.Z,{fluid:!0,children:t})}},30483:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(85893),r=t(35005),i=t(55112),s=t.n(i);function c(e){var n=e.onNextClicked,t=e.onPreviousClicked;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:"".concat(s().previousPageBtn," ").concat(s().pageBtnFixed),onClick:t,children:(0,a.jsx)("i",{className:"fa fa-chevron-left fa-lg","aria-hidden":"true"})}),(0,a.jsx)(r.Z,{className:"".concat(s().nextPageBtn," ").concat(s().pageBtnFixed," pull-right"),onClick:n,children:(0,a.jsx)("i",{className:"fa fa-chevron-right fa-lg","aria-hidden":"true"})})]})}}}]);